<!-- ä¿ç•™å·²æœ‰åŠŸèƒ½ -->
<!-- æ·»åŠ åˆ†é¡µæ§åˆ¶åŒºåŸŸ -->
<div id="pagination-controls" style="margin-top: 1em; display: none; text-align: center;">
  <button onclick="prevPage()">ä¸Šä¸€é¡µ</button>
  <span id="page-info"></span>
  <button onclick="nextPage()">ä¸‹ä¸€é¡µ</button>
  <br><br>
  æ¯é¡µæ˜¾ç¤ºï¼š
  <select id="perPageSelect" onchange="updatePerPage()">
    <option value="5">5</option>
    <option value="10" selected>10</option>
    <option value="20">20</option>
  </select>
</div>

<!-- å•è¯åˆ—è¡¨å®¹å™¨ -->
<div id="word-list"></div>

<script>
let allWords = [];
let currentPage = 1;
let perPage = 10;

function updatePerPage() {
  perPage = parseInt(document.getElementById("perPageSelect").value);
  currentPage = 1;
  renderPagedWords();
}

function prevPage() {
  if (currentPage > 1) {
    currentPage--;
    renderPagedWords();
  }
}

function nextPage() {
  const totalPages = Math.ceil(allWords.length / perPage);
  if (currentPage < totalPages) {
    currentPage++;
    renderPagedWords();
  }
}

function renderPagedWords() {
  const list = document.getElementById("word-list");
  list.innerHTML = "";
  const start = (currentPage - 1) * perPage;
  const pageWords = allWords.slice(start, start + perPage);
  pageWords.forEach(({ docSnap, w }) => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <div style='display:flex;justify-content:space-between;'>
        <b>${w.text}</b>
        <button onclick="document.getElementById('a-${docSnap.id}').play()">ğŸ”Š</button>
        <audio id="a-${docSnap.id}" src="${w.audio}"></audio>
      </div>
      <div style='color:gray;'>${w.phonetic || ''}</div>
      <div>é‡Šä¹‰ï¼š${w.meaning}</div>
      <button onclick="deleteWord('${docSnap.id}')">åˆ é™¤</button>
    `;
    list.appendChild(div);
  });
  const totalPages = Math.ceil(allWords.length / perPage);
  document.getElementById("page-info").innerText = `ç¬¬ ${currentPage} é¡µ / å…± ${totalPages} é¡µ`;
  document.getElementById("pagination-controls").style.display = allWords.length > perPage ? "block" : "none";
}
</script>
